<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Run external command, and wait until finishes — run • processx</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Run external command, and wait until finishes — run" />

<meta property="og:description" content="run provides an interface similar to base::system() and
base::system2(), but based on the process class. This allows some
extra features, see below." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">processx</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/processx">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run external command, and wait until finishes</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/processx/blob/master/R/run.R'><code>R/run.R</code></a></small>
    <div class="hidden name"><code>run.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>run</code> provides an interface similar to <code><a href='http://www.rdocumentation.org/packages/base/topics/system'>base::system()</a></code> and
<code><a href='http://www.rdocumentation.org/packages/base/topics/system2'>base::system2()</a></code>, but based on the <a href='process.html'>process</a> class. This allows some
extra features, see below.</p>
    
    </div>

    <pre class="usage"><span class='fu'>run</span>(<span class='kw'>command</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>args</span> <span class='kw'>=</span> <span class='fu'>character</span>(), <span class='kw'>error_on_status</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>wd</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>echo_cmd</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>echo</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>spinner</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>Inf</span>, <span class='kw'>stdout_line_callback</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>stdout_callback</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>stderr_line_callback</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>stderr_callback</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>env</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>windows_verbatim_args</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>windows_hide_window</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>encoding</span> <span class='kw'>=</span> <span class='st'>""</span>, <span class='kw'>cleanup_tree</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>command</th>
      <td><p>Character scalar, the command to run.</p></td>
    </tr>
    <tr>
      <th>args</th>
      <td><p>Character vector, arguments to the command.</p></td>
    </tr>
    <tr>
      <th>error_on_status</th>
      <td><p>Whether to throw an error if the command returns
with a non-zero status, or it is interrupted. The error clases are
<code>system_command_status_error</code> and <code>system_command_timeout_error</code>,
respectively, and both errors have class <code>system_command_error</code> as
well.</p></td>
    </tr>
    <tr>
      <th>wd</th>
      <td><p>Working directory of the process. If <code>NULL</code>, the current
working directory is used.</p></td>
    </tr>
    <tr>
      <th>echo_cmd</th>
      <td><p>Whether to print the command to run to the screen.</p></td>
    </tr>
    <tr>
      <th>echo</th>
      <td><p>Whether to print the standard output and error
to the screen. Note that the order of the standard output and error
lines are not necessarily correct, as standard output is typically
buffered.</p></td>
    </tr>
    <tr>
      <th>spinner</th>
      <td><p>Whether to show a reassuring spinner while the process
is running.</p></td>
    </tr>
    <tr>
      <th>timeout</th>
      <td><p>Timeout for the process, in seconds, or as a <code>difftime</code>
object. If it is not finished before this, it will be killed.</p></td>
    </tr>
    <tr>
      <th>stdout_line_callback</th>
      <td><p><code>NULL</code>, or a function to call for every
line of the standard output. See <code>stdout_callback</code> and also more
below.</p></td>
    </tr>
    <tr>
      <th>stdout_callback</th>
      <td><p><code>NULL</code>, or a function to call for every chunk
of the standard output. A chunk can be as small as a single character.
At most one of <code>stdout_line_callback</code> and <code>stdout_callback</code> can be
non-<code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>stderr_line_callback</th>
      <td><p><code>NULL</code>, or a function to call for every
line of the standard error. See <code>stderr_callback</code> and also more
below.</p></td>
    </tr>
    <tr>
      <th>stderr_callback</th>
      <td><p><code>NULL</code>, or a function to call for every chunk
of the standard error. A chunk can be as small as a single character.
At most one of <code>stderr_line_callback</code> and <code>stderr_callback</code> can be
non-<code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>env</th>
      <td><p>Environment of the child process, a named character vector.
IF <code>NULL</code>, the environment of the parent is inherited.</p></td>
    </tr>
    <tr>
      <th>windows_verbatim_args</th>
      <td><p>Whether to omit the escaping of the
command and the arguments on windows. Ignored on other platforms.</p></td>
    </tr>
    <tr>
      <th>windows_hide_window</th>
      <td><p>Whether to hide the window of the
application on windows. Ignored on other platforms.</p></td>
    </tr>
    <tr>
      <th>encoding</th>
      <td><p>The encoding to assume for <code>stdout</code> and
<code>stderr</code>. By default the encoding of the current locale is
used. Note that <code>processx</code> always reencodes the output of
both streams in UTF-8 currently.</p></td>
    </tr>
    <tr>
      <th>cleanup_tree</th>
      <td><p>Whether to clean up the child process tree after
the process has finished.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with components:</p><ul>
<li><p>status The exit status of the process. If this is <code>NA</code>, then the
process was killed and had no exit status.</p></li>
<li><p>stdout The standard output of the command, in a character scalar.</p></li>
<li><p>stderr The standard error of the command, in a character scalar.</p></li>
<li><p>timeout Whether the process was killed because of a timeout.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>run</code> supports</p><ul>
<li><p>Specifying a timeout for the command. If the specified time has
passed, and the process is still running, it will be killed
(with all its child processes).</p></li>
<li><p>Calling a callback function for each line or each chunk of the
standard output and/or error. A chunk may contain multiple lines, and
can be as short as a single character.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="callbacks"><a class="anchor" href="#callbacks"></a>Callbacks</h2>

    
    <p>Some notes about the callback functions. The first argument of a
callback function is a character scalar (length 1 character), a single
output or error line. The second argument is always the <a href='process.html'>process</a>
object. You can manipulate this object, for example you can call
<code>$kill()</code> on it to terminate it, as a response to a message on the
standard output or error.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>## Different examples for Unix and Windows
</div><span class='co'># NOT RUN {</span>
<span class='kw'>if</span> (<span class='no'>.Platform</span>$<span class='no'>OS.type</span> <span class='kw'>==</span> <span class='st'>"unix"</span>) {
  <span class='fu'>run</span>(<span class='st'>"ls"</span>)
  <span class='fu'>system.time</span>(<span class='fu'>run</span>(<span class='st'>"sleep"</span>, <span class='st'>"10"</span>, <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>1</span>,
    <span class='kw'>error_on_status</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>))
  <span class='fu'>system.time</span>(
    <span class='fu'>run</span>(
      <span class='st'>"sh"</span>, <span class='fu'>c</span>(<span class='st'>"-c"</span>, <span class='st'>"for i in 1 2 3 4 5; do echo $i; sleep 1; done"</span>),
      <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>error_on_status</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
    )
  )
} <span class='kw'>else</span> {
  <span class='fu'>run</span>(<span class='st'>"ping"</span>, <span class='fu'>c</span>(<span class='st'>"-n"</span>, <span class='st'>"1"</span>, <span class='st'>"127.0.0.1"</span>))
  <span class='fu'>run</span>(<span class='st'>"ping"</span>, <span class='fu'>c</span>(<span class='st'>"-n"</span>, <span class='st'>"6"</span>, <span class='st'>"127.0.0.1"</span>), <span class='kw'>timeout</span> <span class='kw'>=</span> <span class='fl'>1</span>,
    <span class='kw'>error_on_status</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
}
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#callbacks">Callbacks</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/gaborcsardi'>Gábor Csárdi</a>, <a href='https://github.com/wch'>Winston Chang</a>, <a href='https://www.rstudio.com'><img src='https://tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>, Mango Solutions.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

